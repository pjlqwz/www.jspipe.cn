(window.MIP=window.MIP||[]).push({name:"mip-zblogphp-article-viewnum",func:function(){define("mip-zblogphp-article-viewnum/mip-zblogphp-article-viewnum",["require","customElement"],function(e){var t=e("customElement").create(),i=[],n=[],a=null;if(!window.zblogphp)window.zblogphp={};var o=function(){var e=document.querySelector("meta[name=bloghost]"),t=e.getAttribute("content");if(!e)return void console.error("您还未设置博客域名");var a=t+"?mip&component=article_viewnum&gets=";a+=encodeURIComponent(i.join(",")),a+="&updates="+encodeURIComponent(n.join(",")),fetch(a).then(function(e){return e.json()}).then(function(e){Object.keys(e).forEach(function(t){var i=e[t];window.postMessage({from:"zblogphp",event:"viewnums",id:t,value:i},"*")})}).catch(function(e){console.error(e)})};return t.prototype.build=function(){var e=this.element,t=(e.getAttribute("post-id")||"1").toString(),r=e.getAttribute("default")||"0",s="1"===(e.getAttribute("update")||"1"),l=document.querySelector("mip-zblogphp-comment"),c=document.createElement("span"),d=function(e){var i=e.data;if("zblogphp"===i.from)switch(i.event){case"viewnums":if(i.id.toString()===t)c.innerHTML=i.value}};if(c.innerHTML=r,e.appendChild(c),null===l){if(null!==a)clearTimeout(a),a=null;if(s)n.push(t);else i.push(t);a=setTimeout(o,500)}if(window.addEventListener("message",d),window.zblogphp.viewnums)window.postMessage(window.zblogphp.viewnums,"*")},t}),define("mip-zblogphp-article-viewnum",["mip-zblogphp-article-viewnum/mip-zblogphp-article-viewnum"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-zblogphp-article-viewnum",t)}if(window.MIP)require(["mip-zblogphp-article-viewnum"],function(t){e(window.MIP,t)});else require(["mip","mip-zblogphp-article-viewnum"],e)}()}});